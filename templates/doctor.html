<!doctype html>
<html lang="en" class="h-100">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <title>Dack</title>

    <link rel="canonical" href="https://getbootstrap.com/docs/4.5/examples/sticky-footer-navbar/">

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
    integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">

    <style>
      .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
      }

      @media (min-width: 768px) {
        .bd-placeholder-img-lg {
          font-size: 3.5rem;
        }
      }
    </style>
    <!-- Custom styles for this template -->
    <link href="sticky-footer-navbar.css" rel="stylesheet">

    <meta id="scores" scores="{{ scores }}">

    <script>
        window.onload = function () {
        
        var chart = new CanvasJS.Chart("chartContainer", {
            animationEnabled: true,
            theme: "light2",
            // title:{
            //     text: "Simple Line Chart"
            // },
            axisY: {
                title: "Wellness Score",
                stripLines: [{
                    value: {{ score_avg }},
                    label: "Average Wellness Score"
                }]
            },
            data: [{        
                // type: "line",
                type: "splineArea",
		        color: "rgba(54,158,173,.7)",
                  indexLabelFontSize: 16,
                  dataPoints: [
                    {% for score in scores %}
                    {y: {{score}}},
                    {% endfor %}],
            }]
        });
        chart.render();
        
        }
        </script>

  </head>


  <body class="d-flex flex-column h-100">
  <header style="margin-bottom: 3em;">
  <!-- Fixed navbar -->
  <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
    <div class="collapse navbar-collapse" id="navbarCollapse">
      <ul class="navbar-nav mr-auto">
        <li class="nav-item active">
          <a class="nav-link" href="/doctors">Patient Progress<span class="sr-only">(current)</span></a>
        </li>
      </ul>
    </div>
  </nav>
</header>

<!-- Begin page content -->
<main role="main" class="flex-shrink-0">
  <div class="container">
    <h1 class="mt-5">Shinji Ikari's Progress</h1>
    <p class="lead">Keep track of your patient's progress down below.</p>
    <div>
        <div id="chartContainer" style="height: 370px; width: 100%;"></div>
    </div>

    <div style="margin-top: 2em;">
        {% if entries %}
            {% for entry in entries %}
              <div class="card" style="width: 100%;">
                <div class="card-body">
                  {% if entry.score < 3.5 %}
                    <h5 style="color:crimson;"><span style="font-size: 1.5em;"><b>{{ entry.score }}</b></span> Concern</h5>
                  {% elif entry.score < 6.5 %}
                    <h5 style="color:rgb(225, 178, 22);"><span style="font-size: 1.5em;"><b>{{ entry.score }}</b></span> Moderate</h5>
                  {% else %}
                    <h5 style="color:rgb(40, 176, 49);"><span style="font-size: 1.5em;"><b>{{ entry.score }}</b></span> Good </h5>
                  {% endif %}
                  <h6 class="card-subtitle mb-2 text-muted">{{ entry.date }}</h6>
                </div>
              </div>
            {% endfor %}
        {% else %}
            <h3>No patient journal entries yet.</h3>
        {% endif %}

    </div>
    
  </div>
</main>

<footer class="footer mt-auto py-3">
  <div class="container">
    <span class="text-muted">Stuff.</span>
  </div>
</footer>
<script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
</html>
